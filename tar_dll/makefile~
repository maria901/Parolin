#2021 developed by ama   &  card
AMANDA_FLAGS__ =              -O1  -Wall -Wno-stringop-truncation -Wno-maybe-uninitialized
AMANDA_FLAGS_z =              -O1  -Wall -Wno-stringop-truncation -Wno-maybe-uninitialized
MISLAI_FLAGS__ =              -O0 -Wall -Wno-unused-value -Wno-unused-variable
CARDO__FLAGS__ =              -D_FIXED_________
JULIETFLAGS__  =              -D_FIXED________

include /aoprojeto/make_include

pedro_15:
	make_amanda_kp.exe pedro_15 -f makefile -C 'C:\AMANDA AVA KOCI PEREIRA\nosso_trabalho\amanda_projects\Lenice_makefile_forge_kp'

AVA_KOCI_SANTOS_PEREIRA  = /tar/tar_dll

amanda_32z:

be_xml_32aakp.o
pedro_32aakp.o
tar_32aakp_z.o
val_create_32arp.o
pedro_32aakp.o
val_extract_32arp.o

	@i686-w64-mingw32-gcc.exe $(CARDO__FLAGS__)   \
	-o ar_tar_process.DLL -mdll                  \
	pedro_32aakp.o be_xml_32aakp.o               \
	amanda_s_smart_ape_interface1.def            \
	tar_32aakp_z.o                               \
	val_create_32arp.o val_extract_32arp.o       \
	-Wl,-enable-stdcall-fixup -lpsapi

amanda_32: be_xml_32aakp.o tar_32aakp.o              \
	val_create_32arp.o                           \
	pedro_32aakp.o val_extract_32arp.o

	i686-w64-mingw32-gcc.exe $(CARDO__FLAGS__)   \
	-o ar_tar_process.DLL -mdll                  \
	pedro_32aakp.o be_xml_32aakp.o               \
	amanda_s_smart_ape_interface1.def            \
	tar_32aakp.o                                 \
	val_create_32arp.o val_extract_32arp.o       \
	-Wl,-enable-stdcall-fixup -lpsapi

	$(RIC)

tar_32aakp_z.o                                  : makefile sparse_2_k.c xheader_k.c extract_kkk.c create_zen_ar.c    \
	fnmatch_arp.c tar_1_33.c compression_support_ar.c update_arp_k.c iso_support_arp.c arp.h arp_2.h             \
	cpu_fixed_z.c multi_volume_p.c libarchive_update_i.c enum_files_and_folders_1.c

	i686-w64-mingw32-gcc.exe -Wfatal-errors      \
	-Werror -c -o tar_32aakp_z.o                 \
	tar_1_33.c -DPSAPI_VERSION=1                 \
	$(AMANDA_FLAGS_z)

	$(RIC)

tar_32aakp.o                                    : makefile sparse_2_k.c xheader_k.c extract_kkk.c create_zen_ar.c    \
	fnmatch_arp.c tar_1_33.c compression_support_ar.c update_arp_k.c iso_support_arp.c arp.h arp_2.h             \
	cpu_fixed_z.c multi_volume_p.c libarchive_update_i.c enum_files_and_folders_1.c

	i686-w64-mingw32-gcc.exe -Wfatal-errors      \
	-Werror -c -o tar_32aakp.o                   \
	tar_1_33.c -DPSAPI_VERSION=1                 \
	$(AMANDA_FLAGS__)

	$(RIC)

val_create_32arp.o                              : makefile val_create.c arp.h arp_2.h
	i686-w64-mingw32-gcc.exe -Wfatal-errors      \
	-Werror -c -o val_create_32arp.o             \
	val_create.c                                 \
	$(AMANDA_FLAGS__)

	$(RIC)

val_extract_32arp.o                             : makefile val_extract.c arp.h arp_2.h
	i686-w64-mingw32-gcc.exe -Wfatal-errors      \
	-Werror                                      \
	-c -o val_extract_32arp.o                    \
	val_extract.c                                \
	$(AMANDA_FLAGS__)

	$(RIC)

be_xml_32aakp.o             : makefile        be_xml.c
	i686-w64-mingw32-gcc.exe -Wfatal-errors      \
	-Werror                                      \
	-c -o be_xml_32aakp.o                        \
	be_xml.c                                     \
	$(AMANDA_FLAGS__)

	$(RIC)

pedro_32aakp.o             : makefile pedro.c
	i686-w64-mingw32-gcc.exe -Wfatal-errors      \
	-Werror                                      \
	-c -o pedro_32aakp.o                         \
	pedro.c                                      \
	$(AMANDA_FLAGS__)

	$(RIC)

clean_ar:
	@-rm *unc-backup*
	@cp makefile makefile.a
	@cp makefile makefile.o
	@-rm *.a
	@-rm *.o
	$(RIC)

#########################64 bits DLL

ricardo_64: makefile tar_64aakp.o pedro_64aakp.o     \
	val_create_64arp.o                           \
	val_extract_64arp.o be_xml_64aakp.o

	x86_64-w64-mingw32-gcc.exe $(JULIETFLAGS__)  \
	-o ar_tar_process.DLL -mdll                  \
	pedro_64aakp.o be_xml_64aakp.o               \
	amanda_s_smart_ape_interface1.def            \
	tar_64aakp.o                                 \
	val_create_64arp.o val_extract_64arp.o       \
	-Wl,-enable-stdcall-fixup -lpsapi

	$(RIC)

tar_64aakp.o                                    : makefile sparse_2_k.c xheader_k.c extract_kkk.c create_zen_ar.c        \
	fnmatch_arp.c tar_1_33.c compression_support_ar.c iso_support_arp.c arp.h arp_2.h cpu_fixed_z.c multi_volume_p.c \
	libarchive_update_i.c enum_files_and_folders_1.c
#	unc78.bat openat.c
	x86_64-w64-mingw32-gcc.exe -Wfatal-errors    \
	-Werror -c -o tar_64aakp.o                   \
	tar_1_33.c -DPSAPI_VERSION=1                 \
	$(AMANDA_FLAGS__)

	$(RIC)

val_create_64arp.o                              : makefile val_create.c arp.h arp_2.h
	x86_64-w64-mingw32-gcc.exe -Wfatal-errors    \
	-Werror -c -o val_create_64arp.o             \
	val_create.c                                 \
	$(AMANDA_FLAGS__)

	$(RIC)

val_extract_64arp.o                             : makefile val_extract.c arp.h arp_2.h
	x86_64-w64-mingw32-gcc.exe -Wfatal-errors    \
	-Werror -c -o val_extract_64arp.o            \
	val_extract.c                                \
	$(AMANDA_FLAGS__)

#	unc78.bat

	$(RIC)

be_xml_64aakp.o             : makefile        be_xml.c
	x86_64-w64-mingw32-gcc.exe -Wfatal-errors    \
	-Werror -c -o be_xml_64aakp.o                \
	be_xml.c                                     \
	$(AMANDA_FLAGS__)

	$(RIC)

pedro_64aakp.o             : makefile          pedro.c
	x86_64-w64-mingw32-gcc.exe -Wfatal-errors    \
	-Werror -c -o                                \
	pedro_64aakp.o                               \
	pedro.c                                      \
	$(AMANDA_FLAGS__)

	$(RIC)
